<div class="body-box">
    <div class="row">
        <div class="col-100">
            <p><i>A continuació has de completar 5 preguntes, cal que responguis correctament més del 80% per poder avançar:</i></p>
        </div>
    </div>
    <div class="row">
        <div class="col-100">
            <div class="actividades">
                <form>
                    <h3>1.- Ampans va néixer de la voluntat d’uns pares i mares, a quin any?</h3>
                    <hr>
                    <label class="l1">
                        <input name="q1" class="m-r-small" type="radio" value="a">
                            1960
                            <img class="incorrecta" src="img/icons/x-circle.svg" alt="">
                            <img class="correcta" src="img/icons/check-circle.svg" alt="">
                    </label>
                    <label class="l1">
                        <input name="q1" class="m-r-small" type="radio" value="b">
                            1965
                            <img class="incorrecta" src="img/icons/x-circle.svg" alt="">
                            <img class="correcta" src="img/icons/check-circle.svg" alt="">
                    </label>
                    <label class="l1">
                        <input name="q1" class="m-r-small" type="radio" value="c">
                            1985
                            <img class="incorrecta" src="img/icons/x-circle.svg" alt="">
                            <img class="correcta" src="img/icons/check-circle.svg" alt="">
                    </label>
                    <h3>2.- Quina és la missió de la Fundació AMPANS?</h3>
                    <hr>
                    <label class="l2">
                        <input name="q2" class="m-r-small" type="radio" value="a">
                            Treballar per la millora de la qualitat de vida de tota la població de la comarca del Bages.
                            <img class="incorrecta" src="img/icons/x-circle.svg" alt="">
                            <img class="correcta" src="img/icons/check-circle.svg" alt="">
                    </label>
                    <label class="l2">
                        <input name="q2" class="m-r-small" type="radio" value="b">
                            Acompanyar i donar suport a les persones amb discapacitat intel·lectual o en situació de vulnerabilitat en el desenvolupament del seu projecte de vida, garantint els seus drets i la sostenibilitat d’AMPANS, amb una clara voluntat de transformació social.
                            <img class="incorrecta" src="img/icons/x-circle.svg" alt="">
                            <img class="correcta" src="img/icons/check-circle.svg" alt="">
                    </label>
                    <label class="l2">
                        <input name="q2" class="m-r-small" type="radio" value="c">
                            Crear i gestionar centres, ser¬veis i negocis amb solvència econòmica.
                            <img class="incorrecta" src="img/icons/x-circle.svg" alt="">
                            <img class="correcta" src="img/icons/check-circle.svg" alt="">
                    </label>
                    <h3>3.-	Indica quins són els valors d’AMPANS: </h3>
                    <hr>
                    <label class="l3">
                        <input name="q3" class="m-r-small" type="radio" value="a">
                            Puntualitat, afecte, disciplina, autoritat, ordre i pulcritud.
                            <img class="incorrecta" src="img/icons/x-circle.svg" alt="">
                            <img class="correcta" src="img/icons/check-circle.svg" alt="">
                    </label>
                    <label class="l3">
                        <input name="q3" class="m-r-small" type="radio" value="b">
                            Delicadesa, ser feliç, protecció, ser treballador, agradable i cortès. 
                            <img class="incorrecta" src="img/icons/x-circle.svg" alt="">
                            <img class="correcta" src="img/icons/check-circle.svg" alt="">
                    </label>
                    <label class="l3">
                        <input name="q3" class="m-r-small" type="radio" value="c">
                            Amabilitat i tracte humà, respecte, qualitat, professionalitat, responsabilitat i compromís. 
                            <img class="incorrecta" src="img/icons/x-circle.svg" alt="">
                            <img class="correcta" src="img/icons/check-circle.svg" alt="">
                    </label>
                    <h3>4.- Quin dels següents serveis d’AMPANS pertany al CET (Centre Especial de Treball)?</h3>
                    <hr>
                    <label class="l4">
                        <input name="q4" class="m-r-small" type="radio" value="a">
                            Centre Ocupacional L’Art de Viure.
                            <img class="incorrecta" src="img/icons/x-circle.svg" alt="">
                            <img class="correcta" src="img/icons/check-circle.svg" alt="">
                    </label>
                    <label class="l4">
                        <input name="q4" class="m-r-small" type="radio" value="b">
                            Escola Jeroni de Moragas. 
                            <img class="incorrecta" src="img/icons/x-circle.svg" alt="">
                            <img class="correcta" src="img/icons/check-circle.svg" alt="">
                    </label>
                    <label class="l4">
                        <input name="q4" class="m-r-small" type="radio" value="c">
                            Formatges Muntanyola. 
                            <img class="incorrecta" src="img/icons/x-circle.svg" alt="">
                            <img class="correcta" src="img/icons/check-circle.svg" alt="">
                    </label>
                    <label class="l4">
                        <input name="q4" class="m-r-small" type="radio" value="d">
                            Residència Julio Payàs. 
                            <img class="incorrecta" src="img/icons/x-circle.svg" alt="">
                            <img class="correcta" src="img/icons/check-circle.svg" alt="">
                    </label>
                    <h3>5.- Les persones amb discapacitat intel·lectual tenen dret a:</h3>
                    <hr>
                     <label class="l5">
                        <input name="q5" class="m-r-small" type="radio" value="a">
                            Una escola inclusiva i adaptada a les seves necessitats.
                            <img class="incorrecta" src="img/icons/x-circle.svg" alt="">
                            <img class="correcta" src="img/icons/check-circle.svg" alt="">
                    </label>
                     <label class="l5">
                        <input name="q5" class="m-r-small" type="radio" value="b">
                            Treball en condicions dignes.
                            <img class="incorrecta" src="img/icons/x-circle.svg" alt="">
                            <img class="correcta" src="img/icons/check-circle.svg" alt="">
                    </label>
                     <label class="l5">
                        <input name="q5" class="m-r-small" type="radio" value="c">
                            Viure de forma independent i autònoma, amb els suports que siguin necessaris i amb qualitat de vida.
                            <img class="incorrecta" src="img/icons/x-circle.svg" alt="">
                            <img class="correcta" src="img/icons/check-circle.svg" alt="">
                    </label>
                     <label class="l5">
                        <input name="q5" class="m-r-small" type="radio" value="d">
                            Totes les anteriors són correctes.
                            <img class="incorrecta" src="img/icons/x-circle.svg" alt="">
                            <img class="correcta" src="img/icons/check-circle.svg" alt="">
                    </label>
                </form>
                <div class="col-100 m-t flex j-center a-center">
                    <span id="success-btn" class="mensaje verdadero">Prem Següent per continuar</span>
                    <span id="fail-btn" class="mensaje falso">Prem Següent per continuar</span> 
                    <button id="ckeck-btn" class="outline" onclick="setAnswers()">Comprovar resposta</button>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    var q1 = document.getElementsByName('q1');
    var q2 = document.getElementsByName('q2');
    var q3 = document.getElementsByName('q3');
    var q4 = document.getElementsByName('q4');
    var q5 = document.getElementsByName('q5');
    var labels1 = document.getElementsByClassName('l1');
    var labels2 = document.getElementsByClassName('l2');
    var labels3 = document.getElementsByClassName('l3');
    var labels4 = document.getElementsByClassName('l4');
    var labels5 = document.getElementsByClassName('l5');
    var inputs = document.getElementsByTagName('input');
    var ckeckBtn = document.getElementById('ckeck-btn');
    var successBtn = document.getElementById('success-btn');
    var failBtn = document.getElementById('fail-btn');
    var inputsChecked = [false, false, false, false, false];
    ckeckBtn.disabled = true;

    setEnventsMsg(0, false);
    
    if (JSON.stringify(answers) !== JSON.stringify(['','','','',''])) {
        clickRadioButtons()
    } else {
        for(i=0; i < q1.length; i++) {
            q1[i].addEventListener('change', function() {
                inputsChecked[0] = true;
                unlockCheckBtn();
            })
        }
        for(i=0; i < q2.length; i++) {
            q2[i].addEventListener('change', function() {
                inputsChecked[1] = true;
                unlockCheckBtn();
            })
        }
        for(i=0; i < q3.length; i++) {
            q3[i].addEventListener('change', function() {
                inputsChecked[2] = true;
                unlockCheckBtn();
            })
        }
        for(i=0; i < q4.length; i++) {
            q4[i].addEventListener('change', function() {
                inputsChecked[3] = true;
                unlockCheckBtn();
            })
        }
        for(i=0; i < q5.length; i++) {
            q5[i].addEventListener('change', function() {
                inputsChecked[4] = true;
                unlockCheckBtn();
            })
        }
    }

    function unlockCheckBtn() {
        let count = 0;
        for(i=0; i < inputsChecked.length; i++) {
            if (!inputsChecked[i]) {count++};
        }
        if(count === 0) {
            ckeckBtn.disabled = false;
        }
    }

    function setAnswers() {
        for(i=0; i < q1.length; i++) {
            if(q1[i].checked) {
                answers[0] = q1[i].value;
            }
        }
        for(i=0; i < q2.length; i++) {
            if(q2[i].checked) {
                answers[1] = q2[i].value;
            }
        }
        for(i=0; i < q3.length; i++) {
            if(q3[i].checked) {
                answers[2] = q3[i].value;
            }
        }
        for(i=0; i < q4.length; i++) {
            if(q4[i].checked) {
                answers[3] = q4[i].value;
            }
        }
        for(i=0; i < q5.length; i++) {
            if(q5[i].checked) {
                answers[4] = q5[i].value;
            }
        }
        checkAnswers();
    }

    function getPosition(e) {
        switch (e) {
            case 'a':
                return 0;
                break;
            case 'b':
                return 1;
                break;
            case 'c':
                return 2;
                break;
            case 'd':
                return 3;
                break;
        }
    }

    function clickRadioButtons() {
        q1[getPosition(answers[0])].checked = true;
        q2[getPosition(answers[1])].checked = true;
        q3[getPosition(answers[2])].checked = true;
        q4[getPosition(answers[3])].checked = true;
        q5[getPosition(answers[4])].checked = true;
        checkAnswers();
    }

    function checkAnswers() {
        for(i=0; i < labels1.length; i++) {
            labels1[i].classList.add('disabled');
        }
        for(i=0; i < labels2.length; i++) {
            labels2[i].classList.add('disabled');
        }
        for(i=0; i < labels3.length; i++) {
            labels3[i].classList.add('disabled');
        }
        for(i=0; i < labels4.length; i++) {
            labels4[i].classList.add('disabled');
        }
        for(i=0; i < labels5.length; i++) {
            labels5[i].classList.add('disabled');
        }
        for(i=0; i < q1.length; i++) {
            if(q1[i].checked) {
                if(q1[i].value !== corrects[0]) {
                    labels1[i].classList.add('incorrecta');
                }
            }
            if(q1[i].value === corrects[0]) {
                labels1[i].classList.add('correcta');
            }
        }
        for(i=0; i < q2.length; i++) {
            if(q2[i].checked) {
                if(q2[i].value !== corrects[1]) {
                    labels2[i].classList.add('incorrecta');
                }
            }
            if(q2[i].value === corrects[1]) {
                labels2[i].classList.add('correcta');
            }
        }
        for(i=0; i < q3.length; i++) {
            if(q3[i].checked) {
                if(q3[i].value !== corrects[2]) {
                    labels3[i].classList.add('incorrecta');
                }
            }
            if(q3[i].value === corrects[2]) {
                labels3[i].classList.add('correcta');
            }
        }
        for(i=0; i < q4.length; i++) {
            if(q4[i].checked) {
                if(q4[i].value !== corrects[3]) {
                    labels4[i].classList.add('incorrecta');
                }
            }
            if(q4[i].value === corrects[3]) {
                labels4[i].classList.add('correcta');
            }
        }
        for(i=0; i < q5.length; i++) {
            if(q5[i].checked) {
                if(q5[i].value !== corrects[4]) {
                    labels5[i].classList.add('incorrecta');
                }
            }
            if(q5[i].value === corrects[4]) {
                labels5[i].classList.add('correcta');
            }
        }
        ckeckBtn.style.display = 'none';
        passPage(9);
        resultFinalTest = 0;
        for(i=0; i < corrects.length; i++) {
            if(answers[i] === corrects[i]) {
                resultFinalTest++;
            }
        }
        if(resultFinalTest >= corrects.length * 0.8) {
            passFinalTest = true;
            successBtn.style.display = 'inline';
            setTimeout(function(){successBtn.style.opacity = '1';}, 10)
        } else {
            failBtn.style.display = 'inline';
            setTimeout(function(){failBtn.style.opacity = '1';}, 10)
        }
    }
</script>

